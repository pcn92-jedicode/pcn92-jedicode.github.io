<!DOCTYPE html>
<html>

  <head>

      <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.css">
      <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
      <script src="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.js"></script>
      <meta name="viewport" content="initial-scale=1.0, user-scalable=no">

  </head>

  <body>
    <button onclick="getLocation()">Smart Locate Me !</button>
    <p id="demo">Click the button to get your position:</p>

    <div id="mapholder"></div>
    <script>

    var x=document.getElementById("demo");
    function getLocation()  
      {
      if (navigator.geolocation)
        {
        navigator.geolocation.getCurrentPosition(showPosition,showError);
        }
      else{x.innerHTML="Geolocation is not supported by this browser.";}
      }

    function showPosition(position)
      {

      x.innerHTML = <b>"Latitude: "</b> + position.coords.latitude + "<br>Longitude: " + position.coords.longitude; 
      var latlon=position.coords.latitude+","+position.coords.longitude;

      var img_url="http://maps.googleapis.com/maps/api/staticmap?center="+latlon+"&zoom=14&size=400x300&sensor=false";
      document.getElementById("mapholder").innerHTML="<img src='"+img_url+"'>";
      }

    function showError(error)
      {
      switch(error.code) 
        {
        case error.PERMISSION_DENIED:
          x.innerHTML="User denied the request for Geolocation."
          break;
        case error.POSITION_UNAVAILABLE:
          x.innerHTML="Location information is unavailable."
          break;
        }
      }
    </script>
</body>

<div data-role="footer">
    <h1>HTML5 . jQuery . gMaps</h1>
</div>

</html>
